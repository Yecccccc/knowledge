# webserver八股文

1. #### 为什么你的webserver用线程池而不是进程池

   - 资源消耗：线程可以说是轻量级的进程，每个进程都有自己的独立的内存空间、文件描述符、系统资源，线程则不是
   - 共享虚拟内存：线程共享同一进程的内存空间，进程之间的通信更加高效
   - 上下文切换：进程的上下文切换开销比线程大的很多

2. #### 你的webserver的线程数不够了，这个时候来了一个新的http请求会怎么办

   排队等待、拒绝请求、动态扩展线程池

3. #### 阻塞和非阻塞

   阻塞：当一个函数或调用发起后，它会一直等待操作完成，然后才返回结果。

   非阻塞：在非阻塞操作中，当一个函数或调用发起后，它会立即返回，不会等待操作完成。即使操作尚未完成，调用者线程或进程也可以继续执行其他任务，而不必等待

4. #### IO同步异步与并发同步异步的区别

   IO同步：内核向应用程序通知IO就绪，由应用程序去完成IO

   IO异步：内核向应用程序通知IO完成，由内核完成IO

   并发同步：事件按顺序执行，需要等待前面的时间完成，才能开始后面的事件

   并发异步：前面事件的运行结果不影响后面的事件，事件同时完成

6. #### Reactor和Proactor的区别，你的项目怎么实现模拟Proactor

   Reator同步：主线程监听文件描述符上是否有事件发生，发生则通知工作线程。接受连接、读写、逻辑处理都由工作线程完成

   Proactor：将所有的IO操作都交给主线程和内核处理，工作线程只负责业务逻辑

   模拟Proactor：主线程负责IO读写，读写完成之后通知工作线程

7. #### lt和et的区别

   lt:在 LT 模式下，当一个文件描述符（通常是套接字）准备好进行读取或写入时，操作系统会不断地通知应用程序。应用程序如果没有立即处理，下次还会通知。

   et: 在 ET 模式下，操作系统只在文件描述符从未就绪变为就绪状态时发送一次通知。应用程序如果没有立刻处理，则会错过该时间。

   lt 适用于需要持续监视事件状态变化的场景，而 et 适用于需要及时响应事件状态变化的场景
   

8. #### 进程通信方式/线程通信方式

   进程：管道、消息队列、共享内存、信号量、socket

   管道：单向性、fifo、字节流、默认阻塞

   命名管道：持久、双向，在文件系统中有相关的文件
   
   匿名管道：临时、单向、半双工、通常在有公共祖先的进程使用，没有文件系统相关的文件

   线程：锁、条件变量、信号量、消息队列

   #### 可重入

   函数可以被随时中断，它除了使用自己栈上的变量以外不依赖于任何环境

   原子操作、互斥锁、条件变量

9. #### select poll epoll底层实现，时间复杂度

   select数组 1024 lt O(N)

   poll 链表 65535  lt O(N)

   epoll 消息驱动机制 65535 lt/et O(1) 

   epoll 红黑树存储文件描述符、事件注册通知，就绪队列是个双向链表、从就绪队列获取文件描述符

10. #### http协议

   http请求报文：请求行、请求头、空行、请求体

   请求行：方法、uri、http协议版本

   请求头：请求头部包含了关于请求的各种信息（Host、User-agent、accept、content-type

   空行：\r\n

   请求体：要发送的数据，一般是post请求

   http响应报文：状态行、响应头、空行、响应体

   状态行：HTTP协议版本 状态码 状态消息

   响应头：头部字段名: 字段值（server、content-type、content-length、set-cookie）

   空行：\r\n

   响应体：返回给客户端的数据，一般是get方法

   http请求方法：get（指定请求资源）、post（向指定的资源提交数据）、put（向指定的资源位置上传新的内容）、head（请求获取指定资源的响应头部信息）、delete（请求服务器删除指定的资源）、options（请求获取指定资源所支持的通信选项）、trace（回显服务器收到的请求，用于测试和诊断）

   http特点：简单、无状态、可扩展、基于请求和响应

   http各个版本

   http/1.1:支持长连接keep-alive、管道化（客户端可同时发送多个请求）、
   
   http/2：二进制传输、应用层多路复用、头部压缩、服务器推送
   
   http/3：基于quic

11. #### 守护进程、僵尸进程

    守护进程：后台运行的进程，与终端无关联，关闭了标准输入输出，守护进程通常用于执行一些系统级别的任务。

    僵尸进程：是已经结束的进程，但其父进程还没有回收其资源（包括进程标识符 PID、内存空间、打开的文件等），导致操作系统资源浪费

12. #### 零拷贝

   是指避免数据在用户态和内核态之间的复制，从而提高数据传输的效率和性能的技术
    sendfile：用于将一个文件的内容直接发送到网络套接字

    splice：两个文件描述符之间的数据直接传输

    tee：将一个数据流拷贝到两个不同的管道中


实习相关：
介绍腾讯实习最有价值的一个工作内容
Docker用过没，简单介绍一下它的工作原理和作用
介绍硕士期间的一个项目

C++八股：
对于虚指针有什么了解？为什么要引入虚指针？如果不用虚指针，哪些功能不能够实现？
RAII机制
智能指针有了解吗？详细讲一讲

算法题：
两个栈实现一个队列
两个队列实现一个栈
非递归做法实现二叉树中序遍历（借助智能指针实现）

发散问题：
自己相比于其他人有什么核心优势
如果入职之后，应该怎么规划工作
对音视频算法有什么了解？I帧P帧？编解码？应用层和传输层结合？

H264 H265;
